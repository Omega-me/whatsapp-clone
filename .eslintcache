[{"E:\\Documents\\Web Dev\\React projects\\whatsapp-clone\\src\\index.js":"1","E:\\Documents\\Web Dev\\React projects\\whatsapp-clone\\src\\reportWebVitals.js":"2","E:\\Documents\\Web Dev\\React projects\\whatsapp-clone\\src\\App\\App.js":"3","E:\\Documents\\Web Dev\\React projects\\whatsapp-clone\\src\\components\\Layout\\Layout.jsx":"4","E:\\Documents\\Web Dev\\React projects\\whatsapp-clone\\src\\components\\Footer\\Footer.jsx":"5","E:\\Documents\\Web Dev\\React projects\\whatsapp-clone\\src\\components\\WhatsappContainer\\WhatsappContainer.jsx":"6","E:\\Documents\\Web Dev\\React projects\\whatsapp-clone\\src\\components\\WhatsappContainer\\Chat\\Chat.jsx":"7","E:\\Documents\\Web Dev\\React projects\\whatsapp-clone\\src\\components\\WhatsappContainer\\Sidebar\\Sidebar.jsx":"8","E:\\Documents\\Web Dev\\React projects\\whatsapp-clone\\src\\components\\WhatsappContainer\\Chat\\Message\\Message.jsx":"9","E:\\Documents\\Web Dev\\React projects\\whatsapp-clone\\src\\components\\WhatsappContainer\\Sidebar\\SidebarChat\\SidebarChat.jsx":"10","E:\\Documents\\Web Dev\\React projects\\whatsapp-clone\\src\\libs\\firebase.js":"11","E:\\Documents\\Web Dev\\React projects\\whatsapp-clone\\src\\components\\Login\\Login.jsx":"12","E:\\Documents\\Web Dev\\React projects\\whatsapp-clone\\src\\global\\globalContext.js":"13"},{"size":600,"mtime":1611414908457,"results":"14","hashOfConfig":"15"},{"size":362,"mtime":499162500000,"results":"16","hashOfConfig":"15"},{"size":795,"mtime":1611415238377,"results":"17","hashOfConfig":"15"},{"size":328,"mtime":1611402291068,"results":"18","hashOfConfig":"15"},{"size":271,"mtime":1611393149648,"results":"19","hashOfConfig":"15"},{"size":314,"mtime":1611402320506,"results":"20","hashOfConfig":"15"},{"size":4482,"mtime":1611422678597,"results":"21","hashOfConfig":"15"},{"size":2430,"mtime":1611421468334,"results":"22","hashOfConfig":"15"},{"size":668,"mtime":1611421113862,"results":"23","hashOfConfig":"15"},{"size":1797,"mtime":1611421987904,"results":"24","hashOfConfig":"15"},{"size":587,"mtime":1611423000208,"results":"25","hashOfConfig":"15"},{"size":763,"mtime":1611415302179,"results":"26","hashOfConfig":"15"},{"size":383,"mtime":1611414849858,"results":"27","hashOfConfig":"15"},{"filePath":"28","messages":"29","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},"1sktavo",{"filePath":"31","messages":"32","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"33","messages":"34","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"35","messages":"36","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"41","messages":"42","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"43","usedDeprecatedRules":"30"},{"filePath":"44","messages":"45","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"46","messages":"47","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"54","messages":"55","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},"E:\\Documents\\Web Dev\\React projects\\whatsapp-clone\\src\\index.js",[],["56","57"],"E:\\Documents\\Web Dev\\React projects\\whatsapp-clone\\src\\reportWebVitals.js",[],"E:\\Documents\\Web Dev\\React projects\\whatsapp-clone\\src\\App\\App.js",[],"E:\\Documents\\Web Dev\\React projects\\whatsapp-clone\\src\\components\\Layout\\Layout.jsx",[],"E:\\Documents\\Web Dev\\React projects\\whatsapp-clone\\src\\components\\Footer\\Footer.jsx",[],"E:\\Documents\\Web Dev\\React projects\\whatsapp-clone\\src\\components\\WhatsappContainer\\WhatsappContainer.jsx",[],"E:\\Documents\\Web Dev\\React projects\\whatsapp-clone\\src\\components\\WhatsappContainer\\Chat\\Chat.jsx",["58","59"],"import { Avatar, IconButton } from '@material-ui/core';\r\nimport React, {\r\n  useEffect,\r\n  useState,\r\n  useContext,\r\n  useRef,\r\n  useLayoutEffect,\r\n} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport useStayScrolled from 'react-stay-scrolled';\r\nimport './Chat.css';\r\nimport SearchOutlinedIcon from '@material-ui/icons/SearchOutlined';\r\nimport AttachFileOutlinedIcon from '@material-ui/icons/AttachFileOutlined';\r\nimport EmojiEmotionsOutlinedIcon from '@material-ui/icons/EmojiEmotionsOutlined';\r\nimport MoreVertOutlinedIcon from '@material-ui/icons/MoreVertOutlined';\r\nimport MicOutlinedIcon from '@material-ui/icons/MicOutlined';\r\nimport Message from './Message/Message';\r\nimport { db } from '../../../libs/firebase';\r\nimport firebase from 'firebase';\r\nimport { useParams } from 'react-router-dom';\r\nimport { UserContext } from '../../../global/globalContext';\r\n\r\nconst Chat = () => {\r\n  const listRef = useRef();\r\n  const { stayScrolled /*, scrollBottom*/ } = useStayScrolled(listRef);\r\n  const [message, setMessage] = useState('');\r\n  const [messages, setMessages] = useState([]);\r\n  const [chats, setChats] = useState([]);\r\n  const params = useParams();\r\n  const { userInfo } = useContext(UserContext);\r\n\r\n  useLayoutEffect(() => {\r\n    stayScrolled();\r\n  }, [messages]);\r\n\r\n  useEffect(() => {\r\n    const roomName = db\r\n      .collection('rooms')\r\n      .doc(params.id)\r\n      .onSnapshot(snapshot => setChats(snapshot.data()?.name));\r\n    return () => {\r\n      roomName();\r\n    };\r\n  }, [params.id]);\r\n\r\n  useEffect(() => {\r\n    const allMessages = db\r\n      .collection('rooms')\r\n      .doc(params.id)\r\n      .collection('messages')\r\n      .orderBy('timestamp', 'asc')\r\n      .onSnapshot(snapshot =>\r\n        setMessages(\r\n          snapshot.docs.map(doc => ({\r\n            id: doc.id,\r\n            data: doc.data(),\r\n          }))\r\n        )\r\n      );\r\n    return () => {\r\n      allMessages();\r\n    };\r\n  }, [params.id]);\r\n\r\n  const handleMessage = e => {\r\n    setMessage(e.target.value);\r\n  };\r\n  const sendMessage = e => {\r\n    e.preventDefault();\r\n    if (message) {\r\n      db.collection('rooms').doc(params.id).collection('messages').add({\r\n        message: message,\r\n        timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n        user: userInfo.name,\r\n      });\r\n    }\r\n    setMessage('');\r\n  };\r\n\r\n  return (\r\n    <div className='chat'>\r\n      <div className='chat__header'>\r\n        <Avatar\r\n          src={`https://avatars.dicebear.com/4.5/api/male/${params.id}.svg`}\r\n        />\r\n        <div className='chat__room'>\r\n          <h2>{chats}</h2>\r\n          <p>\r\n            Last seen {''}\r\n            {new Date(\r\n              messages[messages.length - 1]?.data?.timestamp?.toDate()\r\n            ).toUTCString()}\r\n          </p>\r\n        </div>\r\n        <div className='chat__buttons'>\r\n          <IconButton>\r\n            <SearchOutlinedIcon />\r\n          </IconButton>\r\n          <IconButton>\r\n            <AttachFileOutlinedIcon />\r\n          </IconButton>\r\n          <IconButton>\r\n            <MoreVertOutlinedIcon />\r\n          </IconButton>\r\n        </div>\r\n      </div>\r\n      <div className='chat__body' ref={listRef}>\r\n        {messages.map(({ id, data }) => (\r\n          <>\r\n            {userInfo.name !== data.user ? (\r\n              <Message\r\n                login\r\n                user={data.user}\r\n                key={id}\r\n                id={id}\r\n                message={data.message}\r\n                time={new Date(data.timestamp?.toDate()).toUTCString()}\r\n              />\r\n            ) : (\r\n              <Message\r\n                logIn\r\n                user={data.user}\r\n                key={id}\r\n                id={id}\r\n                message={data.message}\r\n                time={new Date(data.timestamp?.toDate()).toUTCString()}\r\n              />\r\n            )}\r\n          </>\r\n        ))}\r\n      </div>\r\n      <div className='chat__input'>\r\n        <div className='chat__btnLeft'>\r\n          <IconButton>\r\n            <EmojiEmotionsOutlinedIcon />\r\n          </IconButton>\r\n          <IconButton>\r\n            <AttachFileOutlinedIcon />\r\n          </IconButton>\r\n        </div>\r\n        <form onSubmit={sendMessage}>\r\n          <input\r\n            value={message}\r\n            onChange={handleMessage}\r\n            placeholder='Type a message'\r\n          />\r\n        </form>\r\n        <IconButton>\r\n          <MicOutlinedIcon />\r\n        </IconButton>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Chat;\r\n","E:\\Documents\\Web Dev\\React projects\\whatsapp-clone\\src\\components\\WhatsappContainer\\Sidebar\\Sidebar.jsx",[],"E:\\Documents\\Web Dev\\React projects\\whatsapp-clone\\src\\components\\WhatsappContainer\\Chat\\Message\\Message.jsx",[],"E:\\Documents\\Web Dev\\React projects\\whatsapp-clone\\src\\components\\WhatsappContainer\\Sidebar\\SidebarChat\\SidebarChat.jsx",[],"E:\\Documents\\Web Dev\\React projects\\whatsapp-clone\\src\\libs\\firebase.js",[],"E:\\Documents\\Web Dev\\React projects\\whatsapp-clone\\src\\components\\Login\\Login.jsx",[],"E:\\Documents\\Web Dev\\React projects\\whatsapp-clone\\src\\global\\globalContext.js",[],{"ruleId":"60","replacedBy":"61"},{"ruleId":"62","replacedBy":"63"},{"ruleId":"64","severity":1,"message":"65","line":9,"column":8,"nodeType":"66","messageId":"67","endLine":9,"endColumn":17},{"ruleId":"68","severity":1,"message":"69","line":34,"column":6,"nodeType":"70","endLine":34,"endColumn":16,"suggestions":"71"},"no-native-reassign",["72"],"no-negated-in-lhs",["73"],"no-unused-vars","'PropTypes' is defined but never used.","Identifier","unusedVar","react-hooks/exhaustive-deps","React Hook useLayoutEffect has a missing dependency: 'stayScrolled'. Either include it or remove the dependency array.","ArrayExpression",["74"],"no-global-assign","no-unsafe-negation",{"desc":"75","fix":"76"},"Update the dependencies array to be: [messages, stayScrolled]",{"range":"77","text":"78"},[1271,1281],"[messages, stayScrolled]"]